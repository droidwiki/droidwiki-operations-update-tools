<?xml version="1.0" encoding="UTF-8" ?>
<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <parameters>
        <parameter key="config.location" type="constant">DroidWiki\Updater\Constants::CONFIG_PATH</parameter>
    </parameters>

    <services>
        <service id="config" class="DroidWiki\Updater\Config">
            <argument type="service" id="clioptions" />
            <argument>%config.location%</argument>
        </service>
        <service id="updater" class="DroidWiki\Updater">
            <argument type="service" id="config" />
            <argument type="service" id="clioptions" />
            <argument type="service" id="git-wrapper" />
            <call method="setLogger">
                <argument type="service" id="logger" />
            </call>
        </service>
        <service id="clioptions" class="DroidWiki\Updater\CliOptions">
            <argument type="service" id="getopt-php" />
            <call method="setLogger">
                <argument type="service" id="logger" />
            </call>
            <call method="initOptions" />
        </service>


        <service id="getopt-php" class="GetOpt\GetOpt" />
        <service id="git-wrapper" class="GitWrapper\GitWrapper" />
        <service id="logger" class="GAubry\Logger\ColoredIndentedLogger" />
    </services>
</container>